CREATE DATABASE SHOP_DT
GO

USE SHOP_DT
GO

 CREATE TABLE BRANCH(
	BRANCH_ID CHAR(6) NOT NULL,
	NAME CHAR(30) NOT NULL,
	ADDRESS NVARCHAR(50)  NOT NULL
	CONSTRAINT pk_BRANCH PRIMARY KEY(BRANCH_ID)
 )
 GO

CREATE TABLE CUSTOMER(
	CUSTOMER_ID CHAR(6) NOT NULL,
	FULLNAME NVARCHAR(30) NOT NULL,
	USERNAME NVARCHAR(30) NOT NULL,
	PASSWORD NVARCHAR(30) NOT NULL,
	GENDER VARCHAR(10),
	EMAIL CHAR(30) NOT NULL,
	PHONE NVARCHAR(50) NOT NULL,
	ADDRESS NVARCHAR(50) NOT NULL,
	CONSTRAINT pk_CUSTOMER PRIMARY KEY(CUSTOMER_ID)
 )
 GO

 CREATE TABLE EMPLOYEE(
	EMPLOYEE_ID CHAR(6) NOT NULL,
	NAME NVARCHAR(50)  NOT NULL,
	BRANCH_ID CHAR(6) NOT NULL,
	USERNAME NVARCHAR(30) NOT NULL,
	PASSWORD NVARCHAR(30) NOT NULL,
	CONSTRAINT pk_EMPLOYEE PRIMARY KEY(EMPLOYEE_ID),

	CONSTRAINT fk_branch_EMPLOYEE FOREIGN KEY(BRANCH_ID) REFERENCES BRANCH(BRANCH_ID),
 )
 GO 

 CREATE TABLE WAREHOUSE(
	WAREHOUSE_ID CHAR(6) NOT NULL,
	BRANCH_ID CHAR(6) NOT NULL,
	NAME CHAR(30) NOT NULL,
	ADDRESS NVARCHAR(50)  NOT NULL
	CONSTRAINT pk_WAREHOUSE PRIMARY KEY(WAREHOUSE_ID),

	CONSTRAINT fk_branch_WAREHOUSE FOREIGN KEY(BRANCH_ID) REFERENCES BRANCH(BRANCH_ID),
 )
 GO 

 CREATE TABLE PRODUCT(
	PRODUCT_ID CHAR(6) NOT NULL,
	NAME NVARCHAR(50)  NOT NULL,
	IMPORT_PRICE CHAR(30) NOT NULL,
	PRICE CHAR(30) NOT NULL,
	WAREHOUSE_ID CHAR(6) NOT NULL,
	CONSTRAINT pk_PRODUCT PRIMARY KEY(PRODUCT_ID),

	CONSTRAINT fk_warehouse_PRODUCT FOREIGN KEY(WAREHOUSE_ID) REFERENCES WAREHOUSE(WAREHOUSE_ID),
)
 GO 

  CREATE TABLE ORDERS(
	ORDER_ID CHAR(6) NOT NULL,
	CUSTOMER_ID CHAR(6) NOT NULL,
	EMPLOYEE_ID CHAR(6),
	PRODUCT_ID CHAR(6) NOT NULL,
	AMOUNT INT NOT NULL,
	STATUS CHAR(20) NOT NULL,
	CONSTRAINT pk_ORDERS PRIMARY KEY(ORDER_ID),

	CONSTRAINT fk_customer_ORDERS FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID),
	CONSTRAINT fk_employee_ORDERS FOREIGN KEY(EMPLOYEE_ID) REFERENCES EMPLOYEE(EMPLOYEE_ID),
	CONSTRAINT fk_product_ORDERS FOREIGN KEY(PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID),
 )
 GO 

   CREATE TABLE CARTS(
	CART_ID CHAR(6) NOT NULL,
	CUSTOMER_ID CHAR(6) NOT NULL,
	PRODUCT_ID CHAR(6) NOT NULL,
	AMOUNT INT NOT NULL,
	CONSTRAINT pk_CARTS PRIMARY KEY(CART_ID),

	CONSTRAINT fk_customer_CARTS FOREIGN KEY(CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID),
	CONSTRAINT fk_product_CARTS FOREIGN KEY(PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID),
 )
 GO

INSERT INTO BRANCH(BRANCH_ID,NAME,ADDRESS) VALUES('CN1',N'Chi nhánh hyện Hòa Vang', 'Huyện Hòa Vang - Xã Hòa Nhơn')
INSERT INTO BRANCH(BRANCH_ID,NAME,ADDRESS) VALUES('CN2',N'Chi nhánh quận Ngũ Hành Sơn', 'phường Hòa Quý - quận Ngũ Hành Sơn')

INSERT INTO WAREHOUSE(WAREHOUSE_ID,NAME,ADDRESS, BRANCH_ID) VALUES('WH1',N'Kho Hòa Vang', 'Huyện Hòa Vang - Xã Hòa Nhơn', 'CN1')
INSERT INTO WAREHOUSE(WAREHOUSE_ID,NAME,ADDRESS, BRANCH_ID) VALUES('WH2',N'Kho Ngũ Hành Sơn', 'phường Hòa Quý - quận Ngũ Hành Sơn', 'CN2')

INSERT INTO EMPLOYEE(EMPLOYEE_ID,NAME,BRANCH_ID, USERNAME, PASSWORD) VALUES('NV1',N'Nguyễn Minh Thắng', 'CN1', 'nmthang2000','123456')
INSERT INTO EMPLOYEE(EMPLOYEE_ID,NAME,BRANCH_ID, USERNAME, PASSWORD) VALUES('NV2',N'Phan Thành Đạt', 'CN2', 'ptdat2000','123456')
INSERT INTO EMPLOYEE(EMPLOYEE_ID,NAME,BRANCH_ID, USERNAME, PASSWORD) VALUES('NV3',N'Nguyễn Văn A', 'CN1', 'nguyenvana','123456')
INSERT INTO EMPLOYEE(EMPLOYEE_ID,NAME,BRANCH_ID, USERNAME, PASSWORD) VALUES('NV4',N'Nguyễn Văn B', 'CN2', 'nguyenvanb','123456')
INSERT INTO EMPLOYEE(EMPLOYEE_ID,NAME,BRANCH_ID, USERNAME, PASSWORD) VALUES('NV5',N'Admin', 'CN2', 'admin','123456')
INSERT INTO EMPLOYEE(EMPLOYEE_ID,NAME,BRANCH_ID, USERNAME, PASSWORD) VALUES('NV6',N'Admin', 'CN1', 'admin','123456')


INSERT INTO CUSTOMER(CUSTOMER_ID,FULLNAME,USERNAME,PASSWORD,GENDER,EMAIL,PHONE,ADDRESS) VALUES('CM1',N'Nguyễn Văn A','nguyenvana','123456', N'Nam', 'nva@gmail.com', '0123', N'Việt Nam')
INSERT INTO CUSTOMER(CUSTOMER_ID,FULLNAME,USERNAME,PASSWORD,GENDER,EMAIL,PHONE,ADDRESS) VALUES('CM2',N'Nguyễn Văn B','nguyenvanb','123456', N'Nữ', 'nvb@gmail.com', '0123', N'Việt Nam')
INSERT INTO CUSTOMER(CUSTOMER_ID,FULLNAME,USERNAME,PASSWORD,GENDER,EMAIL,PHONE,ADDRESS) VALUES('CM3',N'Nguyễn Văn C','nguyenvanc','123456', N'Nữ', 'nvc@gmail.com', '0123', N'Việt Nam')
INSERT INTO CUSTOMER(CUSTOMER_ID,FULLNAME,USERNAME,PASSWORD,GENDER,EMAIL,PHONE,ADDRESS) VALUES('CM4',N'Nguyễn Văn D','nguyenvand','123456', N'Nam', 'nvd@gmail.com', '0123', N'Việt Nam')

INSERT INTO PRODUCT(PRODUCT_ID,NAME,IMPORT_PRICE,PRICE, WAREHOUSE_ID) VALUES('PD1',N'Sam sung 1','10.000', '1.000.000', 'WH1')
INSERT INTO PRODUCT(PRODUCT_ID,NAME,IMPORT_PRICE,PRICE, WAREHOUSE_ID) VALUES('PD2',N'Sam sung 2','10.000', '1.000.000', 'WH1')
INSERT INTO PRODUCT(PRODUCT_ID,NAME,IMPORT_PRICE,PRICE, WAREHOUSE_ID) VALUES('PD3',N'Sam sung 3','10.000', '1.000.000', 'WH1')
INSERT INTO PRODUCT(PRODUCT_ID,NAME,IMPORT_PRICE,PRICE, WAREHOUSE_ID) VALUES('PD4',N'Sam sung 4','10.000', '1.000.000', 'WH1')

INSERT INTO PRODUCT(PRODUCT_ID,NAME,IMPORT_PRICE,PRICE, WAREHOUSE_ID) VALUES('PD5',N'Sam sung 5','10.000', '1.000.000', 'WH2')
INSERT INTO PRODUCT(PRODUCT_ID,NAME,IMPORT_PRICE,PRICE, WAREHOUSE_ID) VALUES('PD6',N'Sam sung 6','10.000', '1.000.000', 'WH2')
INSERT INTO PRODUCT(PRODUCT_ID,NAME,IMPORT_PRICE,PRICE, WAREHOUSE_ID) VALUES('PD7',N'Sam sung 7','10.000', '1.000.000', 'WH2')
INSERT INTO PRODUCT(PRODUCT_ID,NAME,IMPORT_PRICE,PRICE, WAREHOUSE_ID) VALUES('PD8',N'Sam sung 8','10.000', '1.000.000', 'WH2')

INSERT INTO ORDERS(ORDER_ID,CUSTOMER_ID,EMPLOYEE_ID,PRODUCT_ID,AMOUNT,STATUS) VALUES('OD1','CM1','NV1','PD1',2,'Pendding')
INSERT INTO ORDERS(ORDER_ID,CUSTOMER_ID,EMPLOYEE_ID,PRODUCT_ID,AMOUNT,STATUS) VALUES('OD2','CM2','NV3','PD2',2,'Success')
INSERT INTO ORDERS(ORDER_ID,CUSTOMER_ID,EMPLOYEE_ID,PRODUCT_ID,AMOUNT,STATUS) VALUES('OD3','CM3','NV3','PD3',2,'Success')
INSERT INTO ORDERS(ORDER_ID,CUSTOMER_ID,EMPLOYEE_ID,PRODUCT_ID,AMOUNT,STATUS) VALUES('OD4','CM4','NV1','PD4',2,'Pendding')

INSERT INTO ORDERS(ORDER_ID,CUSTOMER_ID,EMPLOYEE_ID,PRODUCT_ID,AMOUNT,STATUS) VALUES('OD5','CM4','NV2','PD5',2,'Pendding')
INSERT INTO ORDERS(ORDER_ID,CUSTOMER_ID,EMPLOYEE_ID,PRODUCT_ID,AMOUNT,STATUS) VALUES('OD5','CM3','NV4','PD6',2,'Success')
INSERT INTO ORDERS(ORDER_ID,CUSTOMER_ID,EMPLOYEE_ID,PRODUCT_ID,AMOUNT,STATUS) VALUES('OD5','CM2','NV2','PD7',2,'Success')
INSERT INTO ORDERS(ORDER_ID,CUSTOMER_ID,EMPLOYEE_ID,PRODUCT_ID,AMOUNT,STATUS) VALUES('OD5','CM1','NV4','PD8',2,'Pendding')

INSERT INTO CARTS(CART_ID,CUSTOMER_ID,PRODUCT_ID,AMOUNT) VALUES('CA1','CM1','PD1',2)
INSERT INTO CARTS(CART_ID,CUSTOMER_ID,PRODUCT_ID,AMOUNT) VALUES('CA2','CM2','PD2',2)
INSERT INTO CARTS(CART_ID,CUSTOMER_ID,PRODUCT_ID,AMOUNT) VALUES('CA3','CM3','PD3',2)
INSERT INTO CARTS(CART_ID,CUSTOMER_ID,PRODUCT_ID,AMOUNT) VALUES('CA4','CM4','PD4',2)
INSERT INTO CARTS(CART_ID,CUSTOMER_ID,PRODUCT_ID,AMOUNT) VALUES('CA5','CM4','PD4',2)

-- delete ORDERS where ORDER_ID = 'OD5'
-- update EMPLOYEE set NAME = N'Nguyễn Văn C' WHERE EMPLOYEE_ID = 'NV2'

-- select PRODUCT.*, WAREHOUSE.ADDRESS, WAREHOUSE.NAME from PRODUCT inner join WAREHOUSE on PRODUCT.WAREHOUSE_ID = WAREHOUSE.WAREHOUSE_ID



